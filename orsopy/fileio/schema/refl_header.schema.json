{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/reflectivity/orsopy/v0.0.1/orsopy/fileio/schema/refl_header.schema.json",
  "title": "Orso",
  "type": "object",
  "properties": {
    "data_source": {
      "anyOf": [
        {
          "$ref": "#/definitions/DataSource"
        }
      ]
    },
    "reduction": {
      "anyOf": [
        {
          "$ref": "#/definitions/Reduction"
        }
      ]
    },
    "columns": {
      "anyOf": [
        {
          "type": "array",
          "items": [
            {
              "$ref": "#/definitions/qz_column"
            },
            {
              "$ref": "#/definitions/R_column"
            }
          ]
        },
        {
          "type": "array",
          "items": [
            {
              "$ref": "#/definitions/qz_column"
            },
            {
              "$ref": "#/definitions/R_column"
            },
            {
              "$ref": "#/definitions/sR_column"
            }
          ]
        },
        {
          "type": "array",
          "items": [
            {
              "$ref": "#/definitions/qz_column"
            },
            {
              "$ref": "#/definitions/R_column"
            },
            {
              "$ref": "#/definitions/sR_column"
            },
            {
              "$ref": "#/definitions/sQz_column"
            }
          ],
          "additionalItems": {
            "$ref": "#/definitions/Column"
          }
        }
      ]
    },
    "data_set": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ]
    },
    "comment": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ]
    }
  },
  "required": [
    "data_source",
    "reduction",
    "columns"
  ],
  "definitions": {
    "Person": {
      "title": "Person",
      "type": "object",
      "properties": {
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "affiliation": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "contact": {
          "description": "Contact (email) address",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "name",
        "affiliation"
      ]
    },
    "Experiment": {
      "title": "Experiment",
      "type": "object",
      "properties": {
        "title": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "instrument": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "date": {
          "format": "date-time",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "probe": {
          "enum": [
            "neutrons",
            "x-rays",
            null
          ],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "facility": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "proposalID": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "doi": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "title",
        "instrument",
        "date",
        "probe"
      ]
    },
    "Sample": {
      "title": "Sample",
      "type": "object",
      "properties": {
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "type": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "composition": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "environment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "sample_parameters": {
          "description": "Using keys for parameters and Value* objects for values.",
          "anyOf": [
            {
              "type": "object"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "name"
      ]
    },
    "Value": {
      "title": "Value",
      "type": "object",
      "properties": {
        "magnitude": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "unit": {
          "description": "SI unit string",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "magnitude"
      ]
    },
    "ValueRange": {
      "title": "ValueRange",
      "type": "object",
      "properties": {
        "min": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "max": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "unit": {
          "description": "SI unit string",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "min",
        "max"
      ]
    },
    "ValueVector": {
      "title": "ValueVector",
      "type": "object",
      "properties": {
        "x": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "y": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "z": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "unit": {
          "description": "SI unit string",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "x",
        "y",
        "z"
      ]
    },
    "InstrumentSettings": {
      "title": "InstrumentSettings",
      "type": "object",
      "properties": {
        "incident_angle": {
          "anyOf": [
            {
              "$ref": "#/definitions/Value"
            },
            {
              "$ref": "#/definitions/ValueRange"
            },
            {
              "type": "null"
            }
          ]
        },
        "wavelength": {
          "anyOf": [
            {
              "$ref": "#/definitions/Value"
            },
            {
              "$ref": "#/definitions/ValueRange"
            },
            {
              "type": "null"
            }
          ]
        },
        "polarization": {
          "description": "Polarization described as unpolarized/ p / m / pp / pm / mp / mm / vector",
          "default": "unpolarized",
          "anyOf": [
            {
              "enum": [
                "unpolarized",
                "p",
                "m",
                "mm",
                "mp",
                "pm",
                "pp"
              ],
              "type": "string"
            },
            {
              "$ref": "#/definitions/ValueVector"
            },
            {
              "type": "null"
            }
          ]
        },
        "configuration": {
          "description": "half / full polarized | liquid_surface | etc",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "incident_angle",
        "wavelength"
      ]
    },
    "File": {
      "title": "File",
      "type": "object",
      "properties": {
        "file": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "timestamp": {
          "description": "Last modified timestamp. If it's not specified, then an attempt will be made to check on the file itself",
          "format": "date-time",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "file"
      ]
    },
    "Measurement": {
      "title": "Measurement",
      "type": "object",
      "properties": {
        "instrument_settings": {
          "anyOf": [
            {
              "$ref": "#/definitions/InstrumentSettings"
            }
          ]
        },
        "data_files": {
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/File"
              },
              {
                "type": "string"
              }
            ]
          },
          "anyOf": [
            {
              "type": "array"
            },
            {
              "type": "null"
            }
          ]
        },
        "references": {
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/File"
              },
              {
                "type": "string"
              }
            ]
          },
          "anyOf": [
            {
              "type": "array"
            },
            {
              "type": "null"
            }
          ]
        },
        "scheme": {
          "enum": [
            "angle- and energy-dispersive",
            "angle-dispersive",
            "energy-dispersive",
            null
          ],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "instrument_settings",
        "data_files"
      ]
    },
    "DataSource": {
      "title": "DataSource",
      "type": "object",
      "properties": {
        "owner": {
          "anyOf": [
            {
              "$ref": "#/definitions/Person"
            }
          ]
        },
        "experiment": {
          "anyOf": [
            {
              "$ref": "#/definitions/Experiment"
            }
          ]
        },
        "sample": {
          "anyOf": [
            {
              "$ref": "#/definitions/Sample"
            }
          ]
        },
        "measurement": {
          "anyOf": [
            {
              "$ref": "#/definitions/Measurement"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "owner",
        "experiment",
        "sample",
        "measurement"
      ]
    },
    "Software": {
      "title": "Software",
      "type": "object",
      "properties": {
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "platform": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "name"
      ]
    },
    "Reduction": {
      "title": "Reduction",
      "type": "object",
      "properties": {
        "software": {
          "anyOf": [
            {
              "$ref": "#/definitions/Software"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "timestamp": {
          "description": "Timestamp string, formatted as ISO 8601 datetime",
          "format": "date-time",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "creator": {
          "anyOf": [
            {
              "$ref": "#/definitions/Person"
            }
          ]
        },
        "corrections": {
          "items": {
            "type": "string"
          },
          "anyOf": [
            {
              "type": "array"
            },
            {
              "type": "null"
            }
          ]
        },
        "computer": {
          "description": "Computer used for reduction",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "call": {
          "description": "The command line call used",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "script": {
          "description": "Path to reduction script or notebook",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "binary": {
          "description": "Path to full information file",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "software"
      ]
    },
    "qz_column": {
      "title": "qz_column",
      "type": "object",
      "properties": {
        "name": {
          "enum": [
            "Qz",
            null
          ],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "unit": {
          "enum": [
            "1/angstrom",
            "1/nm",
            null
          ],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "dimension": {
          "dimension": "A description of the column",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "name"
      ]
    },
    "R_column": {
      "title": "R_column",
      "type": "object",
      "properties": {
        "name": {
          "enum": [
            "R",
            null
          ],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "unit": {
          "description": "SI unit string",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "dimension": {
          "dimension": "A description of the column",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "name"
      ]
    },
    "sR_column": {
      "title": "sR_column",
      "type": "object",
      "properties": {
        "name": {
          "enum": [
            "sR",
            null
          ],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "unit": {
          "description": "SI unit string",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "dimension": {
          "dimension": "A description of the column",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "name"
      ]
    },
    "sQz_column": {
      "title": "sQz_column",
      "type": "object",
      "properties": {
        "name": {
          "enum": [
            "sQz",
            null
          ],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "unit": {
          "enum": [
            "1/angstrom",
            "1/nm",
            null
          ],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "dimension": {
          "dimension": "A description of the column",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "comment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "name"
      ]
    }
  }
}